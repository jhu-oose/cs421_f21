"use strict";(self.webpackChunkcs_421_source=self.webpackChunkcs_421_source||[]).push([[5470],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=p(n),h=r,u=m["".concat(s,".").concat(h)]||m[h]||d[h]||o;return n?a.createElement(u,i(i({ref:t},c),{},{components:n})):a.createElement(u,i({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7706:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const o={id:"jobs_employer_connect",title:"Connecting `Job` and `Employer` classes",sidebar_label:"Connecting `Job` and `Employer` Classes"},i=void 0,l={unversionedId:"readings/wk4/jobs_employer_connect",id:"readings/wk4/jobs_employer_connect",title:"Connecting `Job` and `Employer` classes",description:"Since we have two separate (model) yet inter-related classes, we need to somehow tie the two together. We can acheive this by either making a reference to the Employer class from the Job class or keep a list of vacancies in Employer. Let us go with first one since in real world there may be so many job vacancies in a single company.",source:"@site/docs/readings/wk4/jobs_employer_connect.md",sourceDirName:"readings/wk4",slug:"/readings/wk4/jobs_employer_connect",permalink:"/cs421/docs/readings/wk4/jobs_employer_connect",draft:!1,editUrl:"https://jhu-oose.github.io/cs421_f21/docs/readings/wk4/jobs_employer_connect.md",tags:[],version:"current",frontMatter:{id:"jobs_employer_connect",title:"Connecting `Job` and `Employer` classes",sidebar_label:"Connecting `Job` and `Employer` Classes"},sidebar:"tutorialSidebar",previous:{title:"The Java Database Connectivity (JDBC) API",permalink:"/cs421/docs/readings/wk4/jdbc"},next:{title:"Lambda Expressions",permalink:"/cs421/docs/readings/wk4/lambda"}},s={},p=[{value:"In terms of Table Relations",id:"in-terms-of-table-relations",level:2}],c={toc:p};function d(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Since we have two separate (model) yet inter-related classes, we need to somehow tie the two together. We can acheive this by either making a reference to the ",(0,r.kt)("inlineCode",{parentName:"p"},"Employer")," class from the ",(0,r.kt)("inlineCode",{parentName:"p"},"Job")," class or keep a list of vacancies in ",(0,r.kt)("inlineCode",{parentName:"p"},"Employer"),". Let us go with first one since in real world there may be so many job vacancies in a single company."),(0,r.kt)("p",null,"So far, we have had a field named ",(0,r.kt)("inlineCode",{parentName:"p"},"employer")," of type ",(0,r.kt)("inlineCode",{parentName:"p"},"Employer")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Job")," class. But, these are POJO classes that are going to be mapped to a database. In order to facitilate this mapping, let us replace that with another field named ",(0,r.kt)("inlineCode",{parentName:"p"},"employerId")," that will be used to reference a specific employer. In particular, ",(0,r.kt)("inlineCode",{parentName:"p"},"employerId")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"Job")," will reference the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," in class ",(0,r.kt)("inlineCode",{parentName:"p"},"Employer"),". This results in the following ",(0,r.kt)("inlineCode",{parentName:"p"},"Job")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Employer")," classes."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(5808).Z,width:"858",height:"356"})),(0,r.kt)("admonition",{title:"POJO",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"POJO is short for Plain Old Java Object; it's a cute way of referring to simple classes like Book and Author that are free of any special restriction or requirement that might be imposed by using a third-part library or a framework. The term was coined by Martin Fowler, Rebecca Parsons and Josh MacKenzie in September 2000:\n\"We wondered why people were so against using regular objects in their systems and concluded that it was because simple objects lacked a fancy name. So we gave them one, and it's caught on very nicely.\"")),(0,r.kt)("h2",{id:"in-terms-of-table-relations"},"In terms of Table Relations"),(0,r.kt)("p",null,"Great! Now that we have our POJO classes in place, we need to map them into our SQLite database. With the current design we have, we need two tables named ",(0,r.kt)("inlineCode",{parentName:"p"},"Jobs")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Employers")," where there is a one-to-one relationship between ",(0,r.kt)("inlineCode",{parentName:"p"},"Jobs")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Employers")," tables. The only question is how do we connect these two tables? This leads us to concept of ",(0,r.kt)("em",{parentName:"p"},"Foreign Key"),"."),(0,r.kt)("admonition",{title:"Foregin Key",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"A foreign key is a column or group of columns in a relational database table that provides a link between two tables. A foreign key creates an ",(0,r.kt)("em",{parentName:"p"},"inclusion dependency constraint"),", which in simple terms means the values of the foreign key attributes stored in the referencing table",(0,r.kt)("sup",{parentName:"p",id:"fnref-2"},(0,r.kt)("a",{parentName:"sup",href:"#fn-2",className:"footnote-ref"},"2"))," must exist in the referenced table.",(0,r.kt)("sup",{parentName:"p",id:"fnref-3"},(0,r.kt)("a",{parentName:"sup",href:"#fn-3",className:"footnote-ref"},"3")))),(0,r.kt)("p",null,"Now, let us (re)create our ",(0,r.kt)("inlineCode",{parentName:"p"},"Employers")," table:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE IF NOT EXISTS Employers (id INTEGER PRIMARY KEY, name VARCHAR(100) NOT NULL UNIQUE, \n                                     sector VARCHAR(100), summary VARCHAR(10000));\n")),(0,r.kt)("p",null,"Next, we create the ",(0,r.kt)("inlineCode",{parentName:"p"},"Jobs")," table with a foreign key constraint:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},'CREATE TABLE IF NOT EXISTS Jobs (id INTEGER PRIMARY KEY, title VARCHAR(200) NOT NULL," +\n        "date real NOT NULL, deadline real , location VARCHAR(200) NOT NULL, " +\n        "fullTime INTEGER, salaryBased INTEGER, requirements VARCHAR(10000), " +\n        "payAmount INTEGER, employerId INTEGER, FOREIGN KEY(employerId) REFERENCES Employers(id) " +\n        "ON UPDATE CASCADE ON DELETE CASCADE);\n')),(0,r.kt)("p",null,"Pay attention to the last two lines in particular. ",(0,r.kt)("mark",null,"FOREIGN KEY(employerId) REFERENCES Employers(id)")," states that ",(0,r.kt)("inlineCode",{parentName:"p"},"employerId")," attribute in the current table (i.e., ",(0,r.kt)("inlineCode",{parentName:"p"},"Jobs"),") references the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," column in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Employers")," table. In (relational) database terminology, the ",(0,r.kt)("inlineCode",{parentName:"p"},"Employers")," table is called the ",(0,r.kt)("em",{parentName:"p"},"parent")," table and ",(0,r.kt)("inlineCode",{parentName:"p"},"Jobs")," is the child ",(0,r.kt)("em",{parentName:"p"},"table"),". "),(0,r.kt)("p",null,"The last line decides what will happen to a row (or set of rows) in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Jobs")," table with a particular foreign key value (i.e., a particular ",(0,r.kt)("inlineCode",{parentName:"p"},"employerId")," value) if we update or delete that ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," value in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Employers")," table. ",(0,r.kt)("mark",null,"ON UPDATE CASCADE")," means if a particular ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," value in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Employers")," table is updated, the value is updated for all corresponding rows in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Jobs")," table too. Similarly, ",(0,r.kt)("mark",null,"ON DELETE CASCADE")," means associated jobs in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Jobs"),' table will be deleted "on delete" of any particular ',(0,r.kt)("inlineCode",{parentName:"p"},"id")," value in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Employers")," table."),(0,r.kt)("p",null,"Once the tables are created, we are ready to implement create, read, update, and delete (CRUD) operations for each of ",(0,r.kt)("inlineCode",{parentName:"p"},"Employer")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Job")," entities."),(0,r.kt)("div",{className:"footnotes"},(0,r.kt)("hr",{parentName:"div"}),(0,r.kt)("ol",{parentName:"div"},(0,r.kt)("li",{parentName:"ol",id:"fn-2"},"In this context, the referencing table (i.e. the table that contains the foreign key constraint) is usually called the child table and the referenced table is called the parent table.",(0,r.kt)("a",{parentName:"li",href:"#fnref-2",className:"footnote-backref"},"\u21a9")),(0,r.kt)("li",{parentName:"ol",id:"fn-3"},"It is out of the scope of this class to go into details of foreign keys and different kinds of relationships among entities (i.e. tables). All you need to know is that a foreign key creates an explicit constraints among two tables such that: 1) all foreign key values stored in the child table must exist in the parent table, and 2) you can control what will happen to the records (i.e., rows) in the child table if we update or remove a referenced value(s) from the parent table.",(0,r.kt)("a",{parentName:"li",href:"#fnref-3",className:"footnote-backref"},"\u21a9")))))}d.isMDXComponent=!0},5808:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/job_employer_connect-d643d5a63631e3d441a8bd96581d148f.png"}}]);