"use strict";(self.webpackChunkcs_421_source=self.webpackChunkcs_421_source||[]).push([[4617],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>d});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},m=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),u=p(n),d=a,f=u["".concat(s,".").concat(d)]||u[d]||c[d]||i;return n?r.createElement(f,l(l({ref:t},m),{},{components:n})):r.createElement(f,l({ref:t},m))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var p=2;p<i;p++)l[p]=n[p];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8896:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const i={id:"reuse",title:"Template reuse",sidebar_label:"Template Reuse"},l=void 0,o={unversionedId:"readings/wk5/reuse",id:"readings/wk5/reuse",title:"Template reuse",description:"Overview",source:"@site/docs/readings/wk5/reuse.md",sourceDirName:"readings/wk5",slug:"/readings/wk5/reuse",permalink:"/cs421/docs/readings/wk5/reuse",draft:!1,editUrl:"https://jhu-oose.github.io/cs421_f21/docs/readings/wk5/reuse.md",tags:[],version:"current",frontMatter:{id:"reuse",title:"Template reuse",sidebar_label:"Template Reuse"},sidebar:"tutorialSidebar",previous:{title:"Model-View-Controller",permalink:"/cs421/docs/readings/wk5/mvc"},next:{title:"CSS Libraries/Frameworks",permalink:"/cs421/docs/readings/wk6/bootstrap"}},s={},p=[{value:"Overview",id:"overview",level:2},{value:"Template inclusion",id:"template-inclusion",level:2}],m={toc:p};function c(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"overview"},"Overview"),(0,a.kt)("p",null,"Many parts of html files are repetitive in all html files; As a principle, code duplication is something we want to avoid. We identify such parts and factor them out into separate velocity file(s). Any files that needs those parts can then import them with ",(0,a.kt)("inlineCode",{parentName:"p"},"#parse")," directive. The ",(0,a.kt)("inlineCode",{parentName:"p"},"#parse")," script element allows the template designer to import a local file that contains VTL. Velocity will parse the VTL and render the template specified."),(0,a.kt)("h2",{id:"template-inclusion"},"Template inclusion"),(0,a.kt)("p",null,"Apache Velocity, as well as most other templating languages, offer a way to reuse templates."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Template reuse may come under the name of template reuse, or template inheritance, or template inclusion. It means the ability to embed part of a template into another one.")),(0,a.kt)("p",null,"Let's look at ",(0,a.kt)("inlineCode",{parentName:"p"},"employers.vm"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<!doctype html>\n<html lang="en">\n<head>\n    \x3c!-- Required meta tags --\x3e\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">\n    <title>List of employers</title>\n</head>\n<body>\n    #if ($employers)\n    <h1>List of all employers:</h1>\n    <div class="divContents">\n        <ol>\n            <p>\n                #foreach($em in $employers )\n                    <li>\n                        <i>$em.name</i> is a ($em.sector) company: $em.summary.\n                    </li>\n                #end\n            </p>\n        </ol>\n    </div>\n    #end\n</body>\n</html>\n')),(0,a.kt)("p",null,"This is a very small file, but still there are parts that are going to be repeated in any other template files we will write later. So, let's create\na new file ",(0,a.kt)("inlineCode",{parentName:"p"},"src/main/resources/public/templates/top.vm")," with the following content:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<!doctype html>\n<html lang="en">\n<head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">\n    <title>$title</title>\n</head>\n<body>\n')),(0,a.kt)("p",null,"Next, create ",(0,a.kt)("inlineCode",{parentName:"p"},"src/main/resources/public/templates/bottom.vm"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},"</body>\n</html>\n")),(0,a.kt)("p",null,"Finally, update ",(0,a.kt)("inlineCode",{parentName:"p"},"src/main/resources/public/templates/employers.vm")," as follows:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'#set( $title = "Employers List" )\n#parse("public/top.vm")\n\n#if ($employers)\n    <h1>List of all employers:</h1>\n    <div class="divContents">\n        <ol>\n        <p>\n            #foreach($em in $employers )\n                <li>\n                    <i>$em.name</i> is a ($em.sector) company: $em.summary.\n                </li>\n            #end\n            </p>\n        </ol>\n    </div>\n    #end\n#end\n\n#parse("public/bottom.vm")\n')),(0,a.kt)("p",null,"As you can see, we are importing ",(0,a.kt)("inlineCode",{parentName:"p"},"top.vm")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"bottom.vm")," into ",(0,a.kt)("inlineCode",{parentName:"p"},"employers.vm"),'. Also, pay attention how "title" varibale is "set" in ',(0,a.kt)("inlineCode",{parentName:"p"},"employers.vm")," and used in ",(0,a.kt)("inlineCode",{parentName:"p"},"top.vm"),". "),(0,a.kt)("p",null,"Rerun ",(0,a.kt)("inlineCode",{parentName:"p"},"Main.main")," again and make sure our ",(0,a.kt)("em",{parentName:"p"},"refactoring")," has not introduced any error; everything must work as before!"))}c.isMDXComponent=!0}}]);