"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3975],{3905:function(e,t,a){a.d(t,{Zo:function(){return m},kt:function(){return h}});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var p=n.createContext({}),l=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},m=function(e){var t=l(e.components);return n.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,o=e.originalType,p=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),d=l(a),h=i,u=d["".concat(p,".").concat(h)]||d[h]||c[h]||o;return a?n.createElement(u,r(r({ref:t},m),{},{components:a})):n.createElement(u,r({ref:t},m))}));function h(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=a.length,r=new Array(o);r[0]=d;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:i,r[1]=s;for(var l=2;l<o;l++)r[l]=a[l];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},9731:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return s},contentTitle:function(){return p},metadata:function(){return l},toc:function(){return m},default:function(){return d}});var n=a(7462),i=a(3366),o=(a(7294),a(3905)),r=["components"],s={id:"composite",title:"Composite",sidebar_label:"Composite"},p=void 0,l={unversionedId:"readings/wk3/composite",id:"readings/wk3/composite",isDocsHomePage:!1,title:"Composite",description:"Composite is a structural design pattern that lets you compose objects into tree structures to represent whole-part hierarchies. Composite lets clients to treat a group of objects the same way as a single instance of the same type of object.",source:"@site/docs/readings/wk3/composite.md",sourceDirName:"readings/wk3",slug:"/readings/wk3/composite",permalink:"/cs421_f21/docs/readings/wk3/composite",editUrl:"https://jhu-oose.github.io/cs421_f21/docs/readings/wk3/composite.md",version:"current",frontMatter:{id:"composite",title:"Composite",sidebar_label:"Composite"},sidebar:"tutorialSidebar",previous:{title:"Design Patterns",permalink:"/cs421_f21/docs/readings/wk3/dp"},next:{title:"Adapter",permalink:"/cs421_f21/docs/readings/wk3/adapter"}},m=[{value:"Problem",id:"problem",children:[{value:"A possible solution",id:"a-possible-solution",children:[]},{value:"An alternate solution using Composite pattern",id:"an-alternate-solution-using-composite-pattern",children:[]},{value:"Composite pattern",id:"composite-pattern",children:[]}]}],c={toc:m};function d(e){var t=e.components,s=(0,i.Z)(e,r);return(0,o.kt)("wrapper",(0,n.Z)({},c,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Composite")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},(0,o.kt)("strong",{parentName:"p"},"Composite")," is a ",(0,o.kt)("em",{parentName:"p"},"structural")," design pattern that lets you compose objects into ",(0,o.kt)("em",{parentName:"p"},"tree structures")," to represent ",(0,o.kt)("em",{parentName:"p"},"whole-part hierarchies"),". Composite lets clients to treat a group of objects the same way as a single instance of the same type of object. "))),(0,o.kt)("h2",{id:"problem"},"Problem"),(0,o.kt)("p",null,"Graphics applications like drawing editors let users build complex diagrams out of simple components such as line, rectangle, triangle, circle, etc. Assume we intend to design and implement such an application and we like for our drawing editor to support ",(0,o.kt)("strong",{parentName:"p"},"grouping")," and ",(0,o.kt)("strong",{parentName:"p"},"ungrouping")," operations. In other words, the user can group components to form larger components, which in turn can be grouped to form still larger components. "),(0,o.kt)("h3",{id:"a-possible-solution"},"A possible solution"),(0,o.kt)("p",null,"A simple design defines classes for graphical primitives such as text and lines plus other classes that act as containers for these primitives:"),(0,o.kt)("p",null,(0,o.kt)("img",{src:a(1534).Z})),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Downside of the design")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("ul",{parentName:"div"},(0,o.kt)("li",{parentName:"ul"},"The code treats primitives (",(0,o.kt)("inlineCode",{parentName:"li"},"Circle"),", ",(0,o.kt)("inlineCode",{parentName:"li"},"Rectangle")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"Triangle"),") and the container class (",(0,o.kt)("inlineCode",{parentName:"li"},"ShapeGroup"),") differently, but the user\ntreats them identically. For instance, the user may want to do some operation (e.g. coloring with ",(0,o.kt)("inlineCode",{parentName:"li"},"red"),") on the shape(s). To the user, coloring single shapes is the same selecting (i.e. grouping) a bunch of shapes and coloring them. Having to distinguish shapes (",(0,o.kt)("inlineCode",{parentName:"li"},"Shape"),") and group of shapes (",(0,o.kt)("inlineCode",{parentName:"li"},"ShapeGroup"),") makes the application more complex. The Composite pattern allows use to use recursive ",(0,o.kt)("em",{parentName:"li"},"compositio")," so that clients (users) don't have to make this distinction. ")))),(0,o.kt)("h3",{id:"an-alternate-solution-using-composite-pattern"},"An alternate solution using Composite pattern"),(0,o.kt)("p",null,"The key to the Composite pattern is an abstract class (or an interface in Java) that represents both primitives and their containers. This means, in our example, to make ",(0,o.kt)("inlineCode",{parentName:"p"},"ShapeGroup")," ",(0,o.kt)("em",{parentName:"p"},"implement")," the ",(0,o.kt)("inlineCode",{parentName:"p"},"Shape")," interface. The ",(0,o.kt)("inlineCode",{parentName:"p"},"ShapeGroup")," class provides a means by which several shapes can be grouped together into a single entity which behaves in the same way as a single shape:"),(0,o.kt)("p",null,(0,o.kt)("img",{src:a(4799).Z})),(0,o.kt)("p",null,"But, comes the question how would ",(0,o.kt)("inlineCode",{parentName:"p"},"ShapeGroup")," implement the mandatory ",(0,o.kt)("inlineCode",{parentName:"p"},"draw")," method? The answer is it would call the ",(0,o.kt)("inlineCode",{parentName:"p"},"draw")," method on each shape (or shape group) that is part of the shape group."),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Note that one of the beauties of composite pattern is that it enables nesting. In our example, a shape group can be comprised of single shapes as well as other ",(0,o.kt)("em",{parentName:"p"},"nested")," shape groups, which in turn can be comprised of other shapes and/or shape groups. This is possible because both primitive shapes (e.g. ",(0,o.kt)("inlineCode",{parentName:"p"},"Circle")," etc.) and ",(0,o.kt)("inlineCode",{parentName:"p"},"ShapeGroup")," are inheritted from ",(0,o.kt)("inlineCode",{parentName:"p"},"Shape"),"."))),(0,o.kt)("h3",{id:"composite-pattern"},"Composite pattern"),(0,o.kt)("p",null,"The composite design pattern provides a means of grouping together several objects of type ",(0,o.kt)("inlineCode",{parentName:"p"},"T")," such that the grouped object (i.e. composite object) is also of type ",(0,o.kt)("inlineCode",{parentName:"p"},"T"),"."),(0,o.kt)("p",null,(0,o.kt)("img",{src:a(2050).Z})),(0,o.kt)("p",null,"In the diagram above:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Component:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Declares the abstraction for objects in the composition."),(0,o.kt)("li",{parentName:"ul"},"Could optionally implement default behavior common to all subclasses."))),(0,o.kt)("li",{parentName:"ul"},"Composite:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Represents an aggregate object (collection of components)."),(0,o.kt)("li",{parentName:"ul"},"Usually has methods to add/remove component."),(0,o.kt)("li",{parentName:"ul"},"Typically implements operations of ",(0,o.kt)("inlineCode",{parentName:"li"},"Component")," simply by calling the same operation for each of its constituent components."))),(0,o.kt)("li",{parentName:"ul"},"Concrete Component (a.k.a Leaf)",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Defines behavior for primitive objects in the composition.")))),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"When to use this pattern?")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("ul",{parentName:"div"},(0,o.kt)("li",{parentName:"ul"},'Need to manipulate a hierarchical collection of "primitive" and "aggregate" objects.'),(0,o.kt)("li",{parentName:"ul"},"Need to process (treat) primitive objects the same way as aggregate objects."),(0,o.kt)("li",{parentName:"ul"},"Examples: file/folder hierarchies, organizational charts, tables of contents, parsing structured documents like XML/HTML, etc.")))),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Advantage")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Clients typically only need to interact with the ",(0,o.kt)("inlineCode",{parentName:"p"},"Component")," interface; they would be unaware if they're dealing with a composite or a leaf object. This hides the complexity of the data structure from the outside world."))))}d.isMDXComponent=!0},2050:function(e,t,a){t.Z=a.p+"assets/images/composite04-59c2fcaa380f3c8d3011afa9fbf234a8.png"},1534:function(e,t,a){t.Z=a.p+"assets/images/composite1-ec912b6764b3cb4520a9a6f6b167fa46.jpg"},4799:function(e,t,a){t.Z=a.p+"assets/images/composite2-52122a898a278010452fa6de853779bf.png"}}]);