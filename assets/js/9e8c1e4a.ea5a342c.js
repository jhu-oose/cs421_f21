"use strict";(self.webpackChunkcs_421_source=self.webpackChunkcs_421_source||[]).push([[1646],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),d=o,g=u["".concat(l,".").concat(d)]||u[d]||m[d]||i;return n?a.createElement(g,r(r({ref:t},p),{},{components:n})):a.createElement(g,r({ref:t},p))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,r[1]=s;for(var c=2;c<i;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8835:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var a=n(7462),o=(n(7294),n(3905));const i={id:"singleton",title:"Singleton",sidebar_label:"Singleton"},r=void 0,s={unversionedId:"readings/wk3/singleton",id:"readings/wk3/singleton",title:"Singleton",description:"Singleton is a creational design pattern that lets you ensure that a class has only one instance, while providing a global access point to this instance.",source:"@site/docs/readings/wk3/singleton.md",sourceDirName:"readings/wk3",slug:"/readings/wk3/singleton",permalink:"/cs421/docs/readings/wk3/singleton",draft:!1,editUrl:"https://jhu-oose.github.io/cs421_f21/docs/readings/wk3/singleton.md",tags:[],version:"current",frontMatter:{id:"singleton",title:"Singleton",sidebar_label:"Singleton"},sidebar:"tutorialSidebar",previous:{title:"Observer",permalink:"/cs421/docs/readings/wk3/observer"},next:{title:"Separation of Client and Server",permalink:"/cs421/docs/readings/wk4/api"}},l={},c=[],p={toc:c};function m(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("admonition",{title:"Singleton",type:"info"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},"Singleton")," is a ",(0,o.kt)("em",{parentName:"p"},"creational")," design pattern that lets you ensure that a class has only one instance, while providing a global access point to this instance.")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Singleton pattern is useful when it makes sense to only have on instance of a class. For example, when working with a database or even a text file, oftentimes it is advised to only work with one single connection instance to avoid incosistencies and issues that could arise when multiple instances access the same resource. Aside from this, Singleton pattern is resource friendly, meaning that by creating only one instance, we do not waste memory for a new object when we actually do not need a new one. It also provides more flexibility in the sense that the class itself controls the instantiation process, so the class instantiation process can be adjusted/modified in one place.")),(0,o.kt)("p",null,"The most common way to implement the pattern follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java"},"public final class Singleton {\n\n    private static final Singleton INSTANCE = new Singleton();\n\n    private Singleton() {}\n\n    public static Singleton getInstance() {\n        return INSTANCE;\n    }\n}\n")),(0,o.kt)("p",null,"The code sample above provides the following pattern:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Make the default constructor private, to prevent other objects from using the ",(0,o.kt)("inlineCode",{parentName:"li"},"new")," operator with the Singleton class."),(0,o.kt)("li",{parentName:"ul"},"Create a ",(0,o.kt)("inlineCode",{parentName:"li"},"static")," ",(0,o.kt)("em",{parentName:"li"},"creation method")," that acts as a constructor. ")),(0,o.kt)("p",null,"Singleton design pattern is used in core java classes, for example ",(0,o.kt)("a",{parentName:"p",href:"https://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html"},(0,o.kt)("inlineCode",{parentName:"a"},"java.lang.Runtime")),". "),(0,o.kt)("admonition",{title:"Quote Form JDK Documents",type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Every Java application has a ",(0,o.kt)("strong",{parentName:"p"},"single instance")," of class ",(0,o.kt)("inlineCode",{parentName:"p"},"Runtime")," that allows the application to interface with the environment in which the application is running. The current runtime can be obtained from the ",(0,o.kt)("inlineCode",{parentName:"p"},"getRuntime")," method.")),(0,o.kt)("p",null,"An application cannot create its own instance of this class."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-java",metastring:'hl_lines="8"',hl_lines:'"8"'},'/**\n * Runtime class can be used to get the memory used by a Java applications.\n */\npublic class RuntimeDemo {\n    private static final long KB = 1024;\n\n    public static void main(String[] args) {\n        Runtime runtime = Runtime.getRuntime();\n        long startMemory, endMemory, netMemory;\n        \n        startMemory = runtime.totalMemory() - runtime.freeMemory()\n        // run some application\n        endMemory = runtime.totalMemory() - runtime.freeMemory();\n\n        netMemory = endMemory - startMemeory;\n        System.out.printf("Application used %d kb memory.\\n", \n            netMemory / KB);\n    }\n}\n')),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"Runtime.getRuntime();")," essentially does what ",(0,o.kt)("inlineCode",{parentName:"p"},"Singleton.getInstance();")," does."),(0,o.kt)("admonition",{title:"When to use this pattern?",type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Use the Singleton pattern when a class in your program should have just a single instance available to all clients; for example, a single database object shared by different parts of the program; a single ",(0,o.kt)("em",{parentName:"p"},"logging")," object, hardware drivers' objects, etc.")),(0,o.kt)("admonition",{title:"Advantage",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"You can be sure that a class has only a single instance. Moreover, you gain a global access point to that instance.",(0,o.kt)("sup",{parentName:"p",id:"fnref-1"},(0,o.kt)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1")))),(0,o.kt)("div",{className:"footnotes"},(0,o.kt)("hr",{parentName:"div"}),(0,o.kt)("ol",{parentName:"div"},(0,o.kt)("li",{parentName:"ol",id:"fn-1"},"Unlike global variables that are unsafe (since any code can potentially overwrite the contents of those variables and crash the app), the Singleton pattern lets you safely access some object from anywhere in the program; it protects the single instance from being overwritten by other code.",(0,o.kt)("a",{parentName:"li",href:"#fnref-1",className:"footnote-backref"},"\u21a9")))))}m.isMDXComponent=!0}}]);